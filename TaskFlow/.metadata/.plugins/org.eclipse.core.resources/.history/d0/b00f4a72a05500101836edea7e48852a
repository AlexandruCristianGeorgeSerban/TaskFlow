package com.taskflow.ui;
import com.taskflow.model.RootGroup;
import com.taskflow.model.Category;
import com.taskflow.model.Task;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeModel;
import java.util.List;

public class CategoryTreeModel extends DefaultTreeModel {
	private static final long serialVersionUID = 1L;
	
    public CategoryTreeModel(List<RootGroup> roots) {
        super(new DefaultMutableTreeNode(""));  // invisible root
        updateRoots(roots);
    }

    public void updateRoots(List<RootGroup> roots) {
        DefaultMutableTreeNode invRoot = (DefaultMutableTreeNode) getRoot();
        invRoot.removeAllChildren();
        for (RootGroup rg : roots) {
            DefaultMutableTreeNode rgNode = new DefaultMutableTreeNode(rg);
            for (Category c : rg.getCategories()) {
                DefaultMutableTreeNode cNode = new DefaultMutableTreeNode(c);
                for (Task t : c.getTasks()) {
                    cNode.add(new DefaultMutableTreeNode(t));
                }
                rgNode.add(cNode);
            }
            invRoot.add(rgNode);
        }
        nodeStructureChanged(invRoot);
    }
}
