package com.taskflow.action;

import com.taskflow.model.RootGroup;
import com.taskflow.service.TaskService;
import com.taskflow.ui.MainFrame;

import javax.swing.*;
import java.awt.*;
import java.awt.event.ActionEvent;

/** AdaugÄƒ un Root nou */
public class AddRootAction extends AbstractAction {
    private static final long serialVersionUID = 1L;
    private final MainFrame frame;
    private final TaskService service;

    public AddRootAction(MainFrame frame, TaskService service) {
        super("Add Root");
        this.frame = frame;
        this.service = service;
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        String name = JOptionPane.showInputDialog(frame, "Root name:");
        if (name == null || name.trim().isEmpty()) return;
        Color c = JColorChooser.showDialog(frame, "Choose root color", Color.BLACK);
        String hex = (c==null) ? "#000000" : String.format("#%02x%02x%02x",c.getRed(),c.getGreen(),c.getBlue());
        service.addRoot(new RootGroup(name.trim(), hex));
        frame.refreshTreeAll();
    }
}
